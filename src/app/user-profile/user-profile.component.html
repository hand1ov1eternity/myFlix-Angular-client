<mat-card>
  <div class="back-button-container">
    <button mat-icon-button class="back-button" (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
  </div>

  <mat-card-header>
    <mat-card-title><h3>Profile</h3></mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form (ngSubmit)="updateProfile()">
      <mat-form-field>
        <input
          matInput
          [(ngModel)]="user.username"
          placeholder="Username"
          type="text"
          name="Username"
          required
        >
      </mat-form-field>
      <mat-form-field>
        <input
          matInput
          [(ngModel)]="user.password"
          type="password"
          placeholder="New Password"
          name="Password"
        >
      </mat-form-field>
      <mat-form-field>
        <input
          matInput
          [(ngModel)]="user.email"
          type="email"
          placeholder="Email"
          name="Email"
          required
        >
      </mat-form-field>
      <mat-form-field>
        <input
          matInput
          [(ngModel)]="birthday"
          type="date"
          placeholder="Birthday"
          name="Birthday"
        >
      </mat-form-field>
      
      <!-- Button inside the form tag now -->
      <button mat-raised-button type="submit" color="primary" style="margin-left: 16px;">Update Profile</button>
    </form>
  </mat-card-content>

  <mat-card-actions>
    <button mat-raised-button (click)="deleteAccount()" color="warn">
      Delete Account
    </button>
  </mat-card-actions>
</mat-card>

<mat-card>
  <mat-card-content>
    <h3>Favorite Movies</h3>
    <div *ngIf="user.favoriteMovies?.length > 0; else noFavorites" class="favorite-movies-container">
      <div *ngFor="let movie of user.favoriteMovies" class="favorite-movie-card">
        <mat-card>
          <mat-card-header>
            <mat-card-title>{{ movie.title }}</mat-card-title>
            <mat-card-subtitle>Directed by: {{ movie.director?.name }}</mat-card-subtitle>
          </mat-card-header>
          <img [src]="movie.imageURL" [alt]="movie.title" />
        </mat-card>
      </div>
    </div>
    <ng-template #noFavorites>
      <p>No favorite movies added yet.</p>
    </ng-template>
  </mat-card-content>
</mat-card>
